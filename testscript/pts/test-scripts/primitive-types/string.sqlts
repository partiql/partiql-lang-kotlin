/*
 * Copyright 2019 Amazon.com, Inc. or its affiliates.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License").
 *  You may not use this file except in compliance with the License.
 * A copy of the License is located at:
 *
 *      http://aws.amazon.com/apache2.0/
 *
 *  or in the "license" file accompanying this file. This file is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific
 *  language governing permissions and limitations under the License.
 */


for::{
    template:[
        test::{
             id: 'concatenation with non-nulls',
             statement: "{ `concatenated_literals`: '${left}' || '${right}', `concatenated_variables`:  env_left || env_right }",
             environment: { env_left: $left, env_right: $right },
             expected: (success { concatenated_literals: $result, concatenated_variables: $result })
          },
    ],
    variable_sets: [
        { left: "",         right:"",           result: ""              },
        { left: "left",     right:"",           result: "left"          },
        { left: "",         right:"right",      result: "right"         },
        { left: "a",        right:"b",          result: "ab"            },
        { left: "hello",    right:"world",      result: "helloworld"    },

        // right is a unicode combining diacritical mark, result appears a single character even though its actually 2
        { left: "o",        right: "\u0300",    result: "oÌ€"             },

        {
            left: "è©±å®¶èº«åœ§è²»è°·",
            right:"æ–™æ‘èƒ½è¨ˆç¨é‡‘",
            result: "è©±å®¶èº«åœ§è²»è°·æ–™æ‘èƒ½è¨ˆç¨é‡‘"
        },
        {
            left: "ĞĞ‚ĞƒĞ„Ğ…Ğ†Ğ‡ĞˆĞ‰ĞŠĞ‹ĞŒĞĞĞĞĞ‘Ğ’Ğ“Ğ”Ğ•Ğ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡",
            right:"Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯Ğ°Ğ±Ğ²Ğ³Ğ´ĞµĞ¶Ğ·Ğ¸Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑÑ",
            result: "ĞĞ‚ĞƒĞ„Ğ…Ğ†Ğ‡ĞˆĞ‰ĞŠĞ‹ĞŒĞĞĞĞĞ‘Ğ’Ğ“Ğ”Ğ•Ğ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯Ğ°Ğ±Ğ²Ğ³Ğ´ĞµĞ¶Ğ·Ğ¸Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑÑ"
        },
        {
            left: "ğªğ®ğ¢ğœğ¤ ğ›ğ«ğ¨ğ°ğ§ ğŸğ¨ğ± ",
            right:"ğ£ğ®ğ¦ğ©ğ¬ ğ¨ğ¯ğğ«",
            result: "ğªğ®ğ¢ğœğ¤ ğ›ğ«ğ¨ğ°ğ§ ğŸğ¨ğ± ğ£ğ®ğ¦ğ©ğ¬ ğ¨ğ¯ğğ«"
        },
        {
            left: "( Í¡Â° ÍœÊ– Í¡Â°)â”¬â”€â”¬ãƒ",
            right:"( Âº _ Âºãƒ)",
            result: "( Í¡Â° ÍœÊ– Í¡Â°)â”¬â”€â”¬ãƒ( Âº _ Âºãƒ)"
        },
        {
            left: "ğŸ˜",
            right:"ğŸ˜",
            result: "ğŸ˜ğŸ˜"
        },
        {
            left: "ğŸ’©ğŸ’©",
            right:"ğŸ’©ğŸ’©",
            result: "ğŸ’©ğŸ’©ğŸ’©ğŸ’©"
        },
    ]
}

for::{
    template:[
        test::{
             id: 'concatenation with null values',
             statement: "${left} || ${right}",
             expected: (success null)
          },
    ],
    variable_sets: [
        { left: "NULL",         right:"NULL",    },
        { left: "MISSING",      right:"MISSING", },

        { left: "''",          right:"NULL",     },
        { left: "NULL",         right:"''",      },

        { left: "''",          right:"MISSING",  },
        { left: "MISSING",         right:"''",   },

        { left: "'a'",          right:"NULL",    },
        { left: "NULL",         right:"'b'",     },

        { left: "'a'",          right:"MISSING", },
        { left: "MISSING",      right:"'b'",     },
    ]
}

for::{
    template:[
        test::{
            id: 'concatenation with non-string values',
            statement: "${left} || ${right}",
            expected: (error)
          },
    ],
    variable_sets: [
        { left: "'a'",      right:"1",   },
        { left: "1",        right:"'a'", },

        { left: "'a'",      right:"true",},
        { left: "true",     right:"'a'", },

        { left: "'a'",      right:"1.1", },
        { left: "1.1",      right:"'a'", },

        { left: "1",        right:"1",   },
        { left: "false",    right:"true",},
        { left: "1.2",      right:"1.1", },
    ]
}